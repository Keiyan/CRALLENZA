/*!
  # Responsive Celendar widget script
  # by w3widgets
  #
  # Author: Lukasz Kokoszkiewicz
  #
  # Copyright © w3widgets 2013 All Rights Reserved
*/
(function(){(function(n){"use strict";var r,i,t;return r=function(n,t){var i;return this.$element=n,this.options=t,this.weekDays=["sun","mon","tue","wed","thu","fri","sat","sun"],this.time=new Date,this.currentYear=this.time.getFullYear(),this.currentMonth=this.time.getMonth(),this.options.time&&(i=this.splitDateString(this.options.time),this.currentYear=i.year,this.currentMonth=i.month),this.initialDraw(),null},r.prototype={addLeadingZero:function(n){return n<10?"0"+n:""+n},applyTransition:function(n,t){return n.css("transition",t),n.css("-ms-transition","-ms-"+t),n.css("-moz-transition","-moz-"+t),n.css("-webkit-transition","-webkit-"+t)},applyBackfaceVisibility:function(n){return n.css("backface-visibility","hidden"),n.css("-ms-backface-visibility","hidden"),n.css("-moz-backface-visibility","hidden"),n.css("-webkit-backface-visibility","hidden")},applyTransform:function(n,t){return n.css("transform",t),n.css("-ms-transform",t),n.css("-moz-transform",t),n.css("-webkit-transform",t)},splitDateString:function(n){var i,r,t,u;return t=n.split("-"),u=parseInt(t[0]),r=parseInt(t[1]-1),i=parseInt(t[2]),{year:u,month:r,day:i}},initialDraw:function(){return this.drawDays(this.currentYear,this.currentMonth)},editDays:function(n){console.log(n);var t,i,f,r,u=[];for(t in n)f=n[t],this.options.events[t]=n[t],console.log(t),r=this.splitDateString(t),i=this.$element.find('[data-year="'+r.year+'"][data-month="'+(r.month+1)+'"][data-day="'+r.day+'"]').parent(".day"),i.removeClass("active"),i.find(".badge").remove(),i.find("a").removeAttr("href"),this.currentMonth===r.month||this.options.activateNonCurrentMonths?u.push(this.makeActive(i,f)):u.push(void 0);return u},clearDays:function(n){var u,t,i,r,e,f;for(f=[],r=0,e=n.length;r<e;r++)u=n[r],delete this.options.events[u],i=this.splitDateString(u),t=this.$element.find('[data-year="'+i.year+'"][data-month="'+(i.month+1)+'"][data-day="'+i.day+'"]').parent(".day"),t.removeClass("active"),t.find(".badge").remove(),f.push(t.find("a").removeAttr("href"));return f},clearAll:function(){var t,i,r,u,e,f;for(this.options.events={},i=this.$element.find('[data-group="days"] .day'),f=[],r=u=0,e=i.length;u<e;r=++u)t=i[r],n(t).removeClass("active"),n(t).find(".badge").remove(),f.push(n(t).find("a").removeAttr("href"));return f},setMonth:function(n){var t;return t=this.splitDateString(n),this.currentMonth=this.drawDays(t.year,t.month)},prev:function(){return this.currentMonth-1<0?(this.currentYear=this.currentYear-1,this.currentMonth=11):this.currentMonth=this.currentMonth-1,this.drawDays(this.currentYear,this.currentMonth),this.options.onMonthChange&&this.options.onMonthChange.call(this),null},next:function(){return this.currentMonth+1>11?(this.currentYear=this.currentYear+1,this.currentMonth=0):this.currentMonth=this.currentMonth+1,this.drawDays(this.currentYear,this.currentMonth),this.options.onMonthChange&&this.options.onMonthChange.call(this),null},addOthers:function(t,i){var r;return typeof i=="object"&&(i.number!=null&&(r=n("<span><\/span>").html(i.number).addClass("badge"),i.badgeClass!=null&&r.addClass(i.badgeClass),t.append(r)),i.url&&t.find("a").attr("href",i.url)),t},makeActive:function(n,t){var i,f,r,u,e;if(t){if(t["class"])for(i=t["class"].split(" "),r=u=0,e=i.length;u<e;r=++u)f=i[r],n.addClass(f);else n.addClass("active");n=this.addOthers(n,t)}return n},getDaysInMonth:function(n,t){return new Date(n,t+1,0).getDate()},drawDay:function(t,i,r,u,f){var o,s,h,e,c,l;return e=n("<div><\/div>").addClass("day"),s=new Date,s.setHours(0,0,0,0),c=new Date(i,r-1,u),l=c.getTime()<s.getTime()?"past":c.getTime()===s.getTime()?"today":"future",e.addClass(this.weekDays[f%7]),e.addClass(l),h=i+"-"+this.addLeadingZero(r)+"-"+this.addLeadingZero(u),(u<=0||u>t)&&(o=new Date(i,r-1,u),u=o.getDate(),r=o.getMonth()+1,i=o.getFullYear(),e.addClass("not-current").addClass(l),this.options.activateNonCurrentMonths&&(h=i+"-"+this.addLeadingZero(r)+"-"+this.addLeadingZero(u))),e.append(n("<a>"+u+"<\/a>").attr("data-day",u).attr("data-month",r).attr("data-year",i)),this.options.monthChangeAnimation&&(this.applyTransform(e,"rotateY(180deg)"),this.applyBackfaceVisibility(e)),e=this.makeActive(e,this.options.events[h]),this.$element.find('[data-group="days"]').append(e)},drawDays:function(t,i){var p,e,s,o,c,w,h,u,l,a,b,k,r,f,v,d,y,g;if(r=this,f=new Date(t,i),p=f.getMonth(),b=f.getMonth()+1,d=f.getFullYear(),f.setDate(1),h=this.options.startFromSunday?f.getDay()+1:f.getDay()||7,l=this.getDaysInMonth(t,i),v=0,this.options.monthChangeAnimation)for(o=this.$element.find('[data-group="days"] .day'),u=y=0,g=o.length;y<g;u=++y)e=o[u],c=u*.01,this.applyTransition(n(e),"transform .5s ease "+c+"s"),this.applyTransform(n(e),"rotateY(180deg)"),this.applyBackfaceVisibility(n(e)),v=(c+.1)*1e3;return s=2,this.options.allRows?a=42:(k=Math.ceil((h-(s-1)+l)/7),a=k*7),this.$element.find("[data-head-year]").html(f.getFullYear()),this.$element.find("[data-head-month]").html(this.options.translateMonths[f.getMonth()]),w=function(){var t,i;for(r.$element.find('[data-group="days"]').empty(),t=s-h,u=r.options.startFromSunday?0:1;t<a-h+s;)r.drawDay(l,d,b,t,u),t=t+1,u=u+1;return i=function(){var t,i;for(o=r.$element.find('[data-group="days"] .day'),u=t=0,i=o.length;t<i;u=++t)e=o[u],r.applyTransition(n(e),"transform .5s ease "+u*.01+"s"),r.applyTransform(n(e),"rotateY(0deg)");return r.options.onDayClick&&r.$element.find('[data-group="days"] .day a').click(function(){return r.options.onDayClick.call(this,r.options.events)}),r.options.onDayHover&&r.$element.find('[data-group="days"] .day a').hover(function(){return r.options.onDayHover.call(this,r.options.events)}),r.options.onActiveDayClick&&r.$element.find('[data-group="days"] .day.active a').click(function(){return r.options.onActiveDayClick.call(this,r.options.events)}),r.options.onActiveDayHover?r.$element.find('[data-group="days"] .day.active a').hover(function(){return r.options.onActiveDayHover.call(this,r.options.events)}):void 0},setTimeout(i,0)},setTimeout(w,v),p}},n.fn.responsiveCalendar=function(t,i){var e,u,f;return i==null&&(i=void 0),u=n.extend({},n.fn.responsiveCalendar.defaults,typeof t=="object"&&t),f={next:"next",prev:"prev",edit:"editDays",clear:"clearDays",clearAll:"clearAll"},e=function(t){var i;return u=n.metadata?n.extend({},u,t.metadata()):u,t.data("calendar",i=new r(t,u)),u.onInit&&u.onInit.call(i),t.find("[data-go]").click(function(){return n(this).data("go")==="prev"&&i.prev(),n(this).data("go")==="next"?i.next():void 0})},this.each(function(){var u,r;return u=n(this),r=u.data("calendar"),r?typeof t=="string"?f[t]!=null?r[f[t]](i):r.setMonth(t):typeof t=="number"&&r.jump(Math.abs(t)+1):e(u),null})},n.fn.responsiveCalendar.defaults={translateMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],events:{},time:void 0,allRows:!0,startFromSunday:!1,activateNonCurrentMonths:!1,monthChangeAnimation:!0,onInit:void 0,onDayClick:void 0,onDayHover:void 0,onActiveDayClick:void 0,onActiveDayHover:void 0,onMonthChange:void 0},t=n('[data-spy="responsive-calendar"]'),t.length?(i={},t.data("translate-months")!=null&&(i.translateMonths=t.data("translate-months").split(",")),t.data("time")!=null&&(i.time=t.data("time")),t.data("all-rows")!=null&&(i.allRows=t.data("all-rows")),t.data("start-from-sunday")!=null&&(i.startFromSunday=t.data("start-from-sunday")),t.data("activate-non-current-months")!=null&&(i.activateNonCurrentMonths=t.data("activate-non-current-months")),t.data("month-change-animation")!=null&&(i.monthChangeAnimation=t.data("month-change-animation")),t.responsiveCalendar(i)):void 0})(jQuery)}).call(this);
/*
//# sourceMappingURL=responsive-calendar.min.js.map
*/